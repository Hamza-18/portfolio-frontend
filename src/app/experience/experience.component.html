<section id="experience" class="experience-section">
  <div class="experience-card">
    <h2>Experience</h2>
    
    <div *ngIf="loading$ | async" class="loading">
      <div class="terminal-loader">
        <div class="scanner"></div>
        <p>Loading experience data...</p>
      </div>
    </div>

    <div *ngIf="error$ | async as errorMsg" class="error-message">
      <p>Failed to load experience data: {{ errorMsg }}</p>
    </div>

    <div *ngIf="!(loading$ | async) && !(error$ | async)" class="experience-container">
      <div class="companies-list">
        <div 
          *ngFor="let exp of experiences$ | async" 
          class="company-item" 
          [class.active]="(selectedExperience$ | async) === exp"
          (click)="selectExperience(exp)">
          <div class="company-name">{{ exp.company }}</div>
          <div class="duration">{{ exp.duration }}</div>
        </div>
      </div>

      <div class="experience-details" *ngIf="selectedExperience$ | async as selectedExperience">
        <div class="header">
          <div class="title-container">
            <h3>{{ selectedExperience.position }}</h3>
            <h4>{{ selectedExperience.company }}</h4>
            <div class="duration-badge">{{ selectedExperience.duration }}</div>
          </div>
        </div>

      <ul class="description-list">
        <li *ngFor="let line of selectedExperience.description">{{ line }}</li>
      </ul>

      <br>
        <div class="skills-container">
          <div class="skill-tag" *ngFor="let skill of selectedExperience.skills">
            {{ skill }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
